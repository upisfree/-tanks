(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w={}.hasOwnProperty,x=function(a,b){function c(){this.constructor=a}for(var d in b)w.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};for(i=document.getElementsByTagName("canvas")[0],j=i.getContext("2d"),n=640,p=32,o=n/p,g=[],d={CTRL:17,ALT:18,ESC:27,SPACE:32,ENTER:13,ARROW:{UP:38,LEFT:37,DOWN:40,RIGHT:39},W:87,A:65,S:83,D:68},Math.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},k=function(a,b,c){var d;return d=new Image,d.src="../textures/"+c+".png",d.onload=function(){return j.drawImage(d,a,b)}},m=function(){var a,b,c,d;for(d=[],b=0,c=g.length;c>b;b++)a=g[b],d.push(k(a.x*p,a.y*p,a.texture));return d},b=function(){function a(a,b,c,d){this.x=a,this.y=b,this.texture=c,this.i=null!=d?d:g.length}return a}(),f=function(a){function b(a,b,c,d){this.x=a,this.y=b,this.texture=c,this.lives=d}return x(b,a),b.prototype.move=function(a,b){return this.x+a<o&&this.x+a>-1&&this.y+b<o&&this.y+b>-1?(this.x+=a,this.y+=b,g[this.i]=this):void 0},b.prototype.applyDamage=function(a){return this.lives-=a,this.lives<=0?console.log("Tank was destroyed"):void 0},b}(b),c=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype._ai=null,b}(f),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return x(b,a),b.prototype.enableControl=function(){return window.onkeydown=function(a){switch(a.keyCode){case d.ARROW.LEFT:case d.A:return l.move(-1,0);case d.ARROW.UP:case d.W:return l.move(0,-1);case d.ARROW.RIGHT:case d.D:return l.move(1,0);case d.ARROW.DOWN:case d.S:return l.move(0,1)}}},b}(f),u=q=0,s=o-1;s>=0?s>=q:q>=s;u=s>=0?++q:--q)for(v=r=0,t=o-1;t>=0?t>=r:r>=t;v=t>=0?++r:--r)g.push(new b(u,v,"ground")),Math.random()<.05&&g.push(new b(u,v,"czech_hedgehog"));a={enable:function(a){return a._ai=setInterval(function(){return a.move(Math.randomInt(-1,1),Math.randomInt(-1,1))},100)},disable:function(a){return console.log("disable"),clearInterval(a._ai)}},l=new e(Math.randomInt(0,o-1),Math.randomInt(0,o-1),"player",3),l.enableControl(),g.push(l),h=new c(Math.randomInt(0,o-1),Math.randomInt(0,o-1),"bot",1),a.enable(h),g.push(h),setTimeout(function(){return console.log("ok..."),a.disable(h)},2500),setInterval(function(){return m()},16)}).call(this);